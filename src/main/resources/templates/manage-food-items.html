<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Manage Food Items</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-white text-black min-h-screen flex flex-col items-center justify-start">

<!-- Header -->
<header class="w-full p-4 flex justify-between items-center border-b-2 border-black">
    <h1 class="text-xl font-bold">FOOD PLATFORM - ADMIN</h1>
    <div>
        <a href="/" class="mr-4 hover:underline">Home</a>
        <a href="/admin/login" class="hover:underline">Logout</a>
    </div>
</header>

<!-- Main Section -->
<main class="w-full max-w-6xl px-4 py-8 flex flex-col items-center">

    <h2 class="text-2xl font-bold mb-6">Manage Food Items</h2>

    <!-- Add Single Food Item -->
    <form th:action="@{/admin/save-food-items}" method="post" th:object="${newFoodItem}" class="w-full bg-gray-100 p-6 rounded shadow mb-6">
        <h3 class="text-lg font-medium mb-4">Add Single Food Item</h3>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
            <div>
                <label class="block text-sm font-medium">Name</label>
                <input type="text" th:field="*{name}" class="w-full p-2 border rounded" required>
            </div>
            <div>
                <label class="block text-sm font-medium">Price</label>
                <input type="number" step="0.01" th:field="*{price}" class="w-full p-2 border rounded" required>
            </div>
            <div>
                <label class="block text-sm font-medium">Description</label>
                <input type="text" th:field="*{description}" class="w-full p-2 border rounded" required>
            </div>
            <div>
                <label class="block text-sm font-medium">Quantity</label>
                <input type="number" th:field="*{quantity}" class="w-full p-2 border rounded" required>
            </div>
        </div>
        <button type="submit" class="mt-4 bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-700">Add Food Item</button>
    </form>

    <!-- Batch Add -->
    <form th:action="@{/admin/save-food-items}" method="post" class="w-full bg-gray-100 p-6 rounded shadow mb-6">
        <h3 class="text-lg font-medium mb-4">Batch Add Food Items (Max 5)</h3>
        <div th:each="i, iter : ${#numbers.sequence(0, 4)}" class="flex space-x-2 mb-2">
            <input type="text" name="batchNames" placeholder="Name" class="p-2 border rounded w-1/4">
            <input type="number" step="0.01" name="batchPrices" placeholder="Price" class="p-2 border rounded w-1/4">
            <input type="text" name="batchDescriptions" placeholder="Description" class="p-2 border rounded w-1/4">
            <input type="number" name="batchQuantities" placeholder="Quantity" class="p-2 border rounded w-1/4">
        </div>

        <button type="submit" class="bg-green-500 text-white py-2 px-4 rounded hover:bg-green-700">Add Batch Items</button>
    </form>

    <!-- Food Items Table -->
    <div class="w-full overflow-x-auto">
        <table class="min-w-full border-collapse border border-gray-300">
            <thead>
            <tr class="bg-gray-200">
                <th class="border p-2">ID</th>
                <th class="border p-2">Name</th>
                <th class="border p-2">Price</th>
                <th class="border p-2">Description</th>
                <th class="border p-2">Quantity</th>
                <th class="border p-2">Actions</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="item : ${foodItems}" class="hover:bg-gray-50">
                <td class="border p-2" th:text="${item.id}">1</td>
                <td class="border p-2" th:text="${item.name}">Pizza</td>
                <td class="border p-2" th:text="${item.price}">199.99</td>
                <td class="border p-2" th:text="${item.description}">Cheesy delight</td>
                <td class="border p-2" th:text="${item.quantity}">20</td>
                <td class="border p-2">
                    <!-- Update Form -->
                    <form th:action="@{/admin/update-food-item}" method="post" class="inline-flex space-x-1 mb-1 flex-wrap">
                        <input type="hidden" name="id" th:value="${item.id}">
                        <input type="text" name="name" th:value="${item.name}" class="w-24 p-1 border rounded" required>
                        <input type="number" step="0.01" name="price" th:value="${item.price}" class="w-20 p-1 border rounded" required>
                        <input type="text" name="description" th:value="${item.description}" class="w-28 p-1 border rounded" required>
                        <input type="number" name="quantity" th:value="${item.quantity}" class="w-20 p-1 border rounded" required>
                        <button type="submit" class="bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-700">Update</button>
                    </form>
                    <!-- Delete Form -->
                    <form th:action="@{/admin/delete-food-item}" method="post" class="inline">
                        <input type="hidden" name="id" th:value="${item.id}">
                        <button type="submit" class="bg-red-500 text-white px-2 py-1 rounded hover:bg-red-700">Delete</button>
                    </form>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</main>
</body>
</html>
